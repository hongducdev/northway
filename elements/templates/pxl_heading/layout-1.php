<?php
$html_id = pxl_get_element_id($settings);
$editor_title = $widget->get_settings_for_display( 'title' );
if (!empty($editor_title)) {
	$editor_title = $widget->parse_text_editor( $editor_title ); 
}
$sg_post_title = northway()->get_theme_opt('sg_post_title', 'default');
$sg_post_title_text = northway()->get_theme_opt('sg_post_title_text');

$sg_product_ptitle = northway()->get_theme_opt('sg_product_ptitle', 'default');
$sg_product_ptitle_text = northway()->get_theme_opt('sg_product_ptitle_text');

$sg_service_title = northway()->get_theme_opt('sg_service_title', 'default');
$sg_service_title_text = northway()->get_theme_opt('sg_service_title_text');

$sg_portfolio_title = northway()->get_theme_opt('sg_portfolio_title', 'default');
$sg_portfolio_title_text = northway()->get_theme_opt('sg_portfolio_title_text'); 

?>

<div id="pxl-<?php echo esc_attr($html_id) ?>" class="pxl-heading <?php echo esc_attr($settings['sub_title_style']); ?>-style <?php if(!empty($settings['highlight_text_image']['id'])) { echo 'highlight-text-image'; } ?>">
	<div class="pxl-heading--inner">
		<?php if(!empty($settings['sub_title'])) : ?>
			<div class="pxl-item--subtitle <?php if($settings['sub_title_style'] == 'pxl-sub-title-style-5') { echo esc_attr($settings['icon_position']); } ?> <?php echo esc_attr($settings['sub_title_style'].' '.$settings['pxl_animate_sub']); ?>" data-wow-delay="<?php echo esc_attr($settings['pxl_animate_delay_sub']); ?>ms">
				<?php if($settings['sub_title_style'] == 'px-sub-title-default') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
						<svg xmlns="http://www.w3.org/2000/svg" width="14" height="21" viewBox="0 0 14 21" fill="none">
							<path d="M6.02387 12.9669C6.02387 13.1236 6.02387 13.2804 6.02387 13.439C6.02806 14.2874 6.20591 15.1256 6.54603 15.8996C6.97078 16.8603 7.50571 17.7662 8.13959 18.5982C8.41422 18.9671 8.73582 19.2972 9.03213 19.6495C9.1726 19.814 9.30467 19.9858 9.42781 20.1642C9.48501 20.2413 9.51303 20.337 9.50673 20.4335C9.50042 20.5301 9.46021 20.6211 9.39348 20.6899C9.32889 20.788 9.24101 20.868 9.13802 20.9221C9.03504 20.9763 8.92029 21.003 8.80448 20.9997C8.73782 20.9924 8.67332 20.9713 8.61491 20.9377C8.55651 20.9041 8.50544 20.8587 8.46481 20.8042C8.26968 20.5718 8.08539 20.3302 7.9011 20.0867C7.72353 19.8193 7.45505 19.6287 7.14768 19.5518C7.02845 19.5284 6.90766 19.5142 6.78633 19.5094C6.6183 19.5094 6.45027 19.5094 6.28405 19.5094C6.11783 19.5094 5.9227 19.5278 5.74202 19.5241C4.72804 19.5587 3.73314 19.237 2.92347 18.6129C2.07322 18.0072 1.36438 17.2174 0.847499 16.2999C0.540581 15.7483 0.32278 15.1497 0.202483 14.5273C0.146474 14.2303 0.101307 13.9297 0.0687849 13.629C0.0362631 13.3284 0.0326481 13.0406 0.0163872 12.7455C0.0163872 12.5979 -0.00167975 12.4504 0.00012701 12.3028C0.00012701 12.0151 0.0145815 11.7292 0.0344559 11.4414C0.104991 10.5096 0.329171 9.59665 0.697537 8.74106C1.11528 7.7597 1.61583 6.81729 2.19354 5.92448C2.70304 5.12765 3.21255 4.33081 3.74193 3.54689C4.09244 3.02674 4.47548 2.52872 4.84948 2.02516C5.12772 1.64888 5.41078 1.27629 5.69865 0.907385C5.89653 0.630855 6.12988 0.382702 6.39245 0.169577C6.45272 0.112305 6.52356 0.067872 6.60084 0.0388659C6.67812 0.00985979 6.76029 -0.00313876 6.84255 0.000639172C6.9248 0.0044171 7.00549 0.0248906 7.07991 0.0608641C7.15432 0.0968376 7.22097 0.147591 7.27596 0.210157C7.56179 0.492908 7.81296 0.810023 8.02396 1.15455C8.38531 1.68762 8.74666 2.22253 9.12247 2.74637C9.35916 3.07654 9.63198 3.38273 9.8795 3.70736C10.2264 4.16296 10.5823 4.61118 10.9039 5.08338C11.4544 5.89128 11.9928 6.7084 12.5192 7.53474C12.9328 8.16933 13.2741 8.85006 13.5364 9.56371C13.7029 10.0304 13.8287 10.5113 13.9122 11.0006C13.9465 11.2175 13.97 11.4361 13.9827 11.6554C13.9971 11.8142 14.0025 11.9737 13.9989 12.1331C13.9826 12.6738 13.8832 13.2084 13.7044 13.7176C13.468 14.4115 13.1292 15.0646 12.6999 15.6543C12.493 15.9371 12.2704 16.2074 12.0332 16.4641C11.7621 16.7555 11.4767 17.0322 11.1822 17.2996C10.8301 17.6257 10.4413 17.9081 10.024 18.1407C9.89329 18.2317 9.73511 18.2722 9.57777 18.2551C9.47799 18.238 9.38196 18.203 9.29411 18.1518C8.96611 17.9188 8.68668 17.6216 8.47203 17.2775C8.13226 16.8127 7.82322 16.3253 7.54697 15.8185C7.1761 15.1509 6.90165 14.4321 6.73212 13.6844C6.64901 13.2712 6.57674 12.858 6.49724 12.4449C6.44485 12.1848 6.38703 11.9247 6.32922 11.6646C6.32087 11.6267 6.3075 11.5901 6.28947 11.5558C6.27863 11.5355 6.25514 11.5097 6.23707 11.5097C6.22564 11.5119 6.2149 11.5169 6.20577 11.5243C6.19665 11.5317 6.18941 11.5412 6.18467 11.5521C6.13666 11.6623 6.10207 11.7782 6.08169 11.897C6.04736 12.2512 6.02929 12.609 6.00581 12.965L6.02387 12.9669Z" fill="currentColor"/>
						</svg>
					</div>
				<?php endif; ?>
				<?php if($settings['sub_title_style'] == 'pxl-sub-title-style-2') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
						<svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewBox="0 0 18 20" fill="none">
						<path d="M4.87224 10.4443C5.04078 10.353 5.25059 10.4197 5.33658 10.5882C6.65393 13.1369 8.72455 15.7803 10.1829 17.497C13.9389 4.84851 3.4861 3.70057 1.20567 3.59876C0.954579 3.58472 0.731007 3.75673 0.669095 4.00598C-2.6604 17.3355 7.40376 17.9428 9.63259 17.9183C8.15014 16.17 6.06577 13.502 4.72778 10.9182C4.64179 10.7462 4.7037 10.5321 4.87224 10.4443Z" fill="currentColor"/>
						<path d="M10.1829 17.497C10.1829 17.497 10.176 17.5216 10.1726 17.5321C10.1073 17.7568 9.90432 17.9147 9.67387 17.9183H9.63259C10.6438 19.1118 11.3696 19.8771 11.3868 19.8947C11.4556 19.9649 11.545 20 11.6344 20C11.7238 20 11.8064 19.9684 11.8752 19.9017C12.0093 19.7648 12.0128 19.5436 11.8821 19.4032C11.8649 19.3857 11.1632 18.652 10.1829 17.497Z" fill="currentColor"/>
						<path d="M17.3303 0.407681C17.2684 0.161943 17.0448 -0.0100733 16.7938 0.000458342C15.246 0.0706691 9.94215 0.625335 7.86122 4.91872C8.70391 5.48392 9.49157 6.20358 10.1313 7.12334C10.5166 7.67801 10.8261 8.28182 11.0669 8.92776C11.5759 8.02906 12.0437 7.10579 12.3911 6.2422C12.4634 6.06316 12.6628 5.97891 12.8383 6.04912C13.0137 6.12284 13.0997 6.32645 13.0274 6.50549C12.5941 7.58673 11.9887 8.73468 11.3524 9.81944C11.6688 11.0481 11.7548 12.4207 11.6069 13.9268C15.1737 13.0105 19.7311 10.0125 17.3303 0.40417V0.407681Z" fill="currentColor"/>
						</svg>
					</div>
				<?php endif; ?>
				<?php if($settings['sub_title_style'] == 'pxl-sub-title-style-3') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
						<svg xmlns="http://www.w3.org/2000/svg" width="25" height="19" viewBox="0 0 25 19" fill="none">
						<path d="M25 1.16326V6.23286C25 11.9901 20.4677 16.6735 14.8962 16.6735H13.4529C13.4529 15.4536 13.4796 14.805 13.3163 13.7886L19.2663 7.60242C19.7046 7.1462 19.7023 6.40947 19.2616 5.95658C18.8204 5.5037 18.1075 5.50612 17.6692 5.96204L12.5808 11.2534C11.8842 9.6348 10.8027 8.23283 9.458 7.17104C10.7878 3.01055 14.5878 0 19.0538 0H23.8743C24.4958 0 25 0.521046 25 1.16326Z" fill="currentColor"/>
						<path d="M3.36316 7.36735H1.12574C0.503946 7.36735 0 7.88809 0 8.53061V10.8571C0 15.3472 3.51619 19 7.83828 19H8.95024V18.3166L4.80229 14.0037C4.36401 13.5481 4.36636 12.8114 4.80727 12.3585C5.24819 11.9059 5.96116 11.908 6.39915 12.3636L10.8743 17.0167C11.0839 17.2348 11.2017 17.5296 11.2017 17.8367V15.5102C11.2017 11.0201 7.68554 7.36735 3.36316 7.36735Z" fill="currentColor"/>
						</svg>
					</div>
				<?php endif; ?>
				<?php if($settings['sub_title_style'] == 'pxl-sub-title-style-4') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
						<svg xmlns="http://www.w3.org/2000/svg" width="26" height="30" viewBox="0 0 26 30" fill="none">
						<path d="M7.03768 15.6665C7.28112 15.5296 7.58419 15.6296 7.70839 15.8824C9.61123 19.7053 12.6021 23.6705 14.7087 26.2455C20.134 7.27277 5.03547 5.55085 1.74152 5.39814C1.37884 5.37708 1.0559 5.6351 0.966471 6.00898C-3.8428 26.0033 10.6943 26.9142 13.9137 26.8774C11.7724 24.255 8.76166 20.253 6.82901 16.3774C6.7048 16.1193 6.79423 15.7981 7.03768 15.6665Z" fill="currentColor"/>
						<path d="M14.7087 26.2455C14.7087 26.2455 14.6987 26.2823 14.6938 26.2981C14.5994 26.6351 14.3062 26.8721 13.9734 26.8774H13.9137C15.3744 28.6678 16.4227 29.8157 16.4476 29.842C16.5469 29.9473 16.6761 30 16.8053 30C16.9344 30 17.0537 29.9526 17.153 29.8526C17.3468 29.6472 17.3518 29.3154 17.163 29.1048C17.1381 29.0785 16.1246 27.9779 14.7087 26.2455Z" fill="currentColor"/>
						<path d="M25.0327 0.611521C24.9433 0.242915 24.6203 -0.0151099 24.2577 0.000687512C22.0219 0.106004 14.3609 0.938002 11.3551 7.37809C12.5723 8.22588 13.71 9.30537 14.6341 10.685C15.1906 11.517 15.6377 12.4227 15.9855 13.3916C16.7208 12.0436 17.3965 10.6587 17.8983 9.3633C18.0026 9.09474 18.2908 8.96836 18.5442 9.07368C18.7975 9.18426 18.9217 9.48967 18.8174 9.75823C18.1914 11.3801 17.317 13.102 16.3979 14.7292C16.8549 16.5722 16.9792 18.6311 16.7655 20.8902C21.9176 19.5158 28.5005 15.0188 25.0327 0.606255V0.611521Z" fill="currentColor"/>
						</svg>
					</div>
				<?php endif; ?>
				<?php if($settings['sub_title_style'] == 'pxl-sub-title-style-5') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="23" viewBox="0 0 18 23" fill="none">
						<path d="M8.0501 0C8.68814 0.225856 9.24533 0.503527 9.72183 0.833269C10.1983 1.16301 10.5676 1.50855 10.8297 1.87C11.0918 2.23121 11.3015 2.61523 11.4589 3.02167C11.6163 3.42811 11.7059 3.8301 11.7276 4.22761C11.7496 4.62508 11.7474 5.01127 11.721 5.3861C11.6947 5.76102 11.638 6.10656 11.5506 6.42278C11.4632 6.73891 11.3801 7.01883 11.3015 7.26277C11.2229 7.50656 11.1487 7.69637 11.0784 7.83186L10.9867 8.03509C10.9956 8.08018 10.9998 8.30837 10.9998 8.71926C10.9998 9.13025 10.9956 9.45322 10.9867 9.68805C11.013 9.62488 11.0566 9.54143 11.1179 9.4375C11.179 9.33356 11.3122 9.13949 11.5176 8.85492C11.7225 8.57036 11.9435 8.30845 12.1792 8.06911C12.4155 7.82996 12.7257 7.57916 13.11 7.31718C13.4951 7.05521 13.8945 6.85412 14.3097 6.7143C14.7248 6.57449 15.2143 6.50873 15.778 6.51788C16.3418 6.5269 16.921 6.63533 17.5151 6.84305C17.4981 7.54767 17.4041 8.18684 17.2331 8.76023C17.0628 9.33387 16.8444 9.8058 16.5779 10.1762C16.3113 10.5466 16.0074 10.8696 15.6664 11.145C15.3257 11.4206 14.97 11.6262 14.5982 11.7615C14.2267 11.8971 13.8574 12.0054 13.4903 12.0867C13.1231 12.1681 12.7731 12.2109 12.4414 12.2155C12.1094 12.2199 11.8142 12.2155 11.5563 12.2019C11.2985 12.1882 11.0954 12.168 10.9468 12.1408L10.7238 12.1002C10.523 13.4281 10.2039 14.7062 9.76703 15.9349C9.81938 15.8716 9.89812 15.788 10.003 15.6842C10.1079 15.5802 10.3243 15.3951 10.652 15.1286C10.9797 14.8622 11.318 14.6253 11.668 14.4174C12.0173 14.2095 12.4519 14.0198 12.9721 13.8483C13.4919 13.6768 14.0058 13.5864 14.5124 13.5774C15.0193 13.5681 15.583 13.6745 16.2039 13.8955C16.8241 14.1168 17.4227 14.4668 18 14.9453C17.7203 15.6681 17.3883 16.2912 17.0034 16.8148C16.619 17.3388 16.2211 17.7388 15.8104 18.0141C15.3999 18.2896 14.9673 18.4997 14.5129 18.6442C14.0583 18.7891 13.6147 18.8544 13.1821 18.841C12.7495 18.8273 12.3276 18.7892 11.9169 18.7256C11.506 18.6625 11.1282 18.5632 10.783 18.4276C10.4377 18.2923 10.134 18.168 9.87187 18.055C9.60977 17.9421 9.40861 17.8406 9.26874 17.7503L9.04578 17.615C8.05826 19.6745 7.44081 20.4796 6.21474 21.3471C4.67224 22.5351 3.30814 22.8238 1.95469 23C1.7886 23 1.6487 22.9411 1.53514 22.8238C1.42155 22.7062 1.36474 22.5618 1.36474 22.3903C1.36474 22.2187 1.42154 22.0765 1.53514 21.9636C1.6487 21.8505 1.7886 21.7941 1.95469 21.7941C3.05558 21.6413 4.09541 21.4418 5.40201 20.4797C6.08016 19.9803 7.32603 18.9362 7.73499 17.6284C7.42031 17.7551 7.10569 17.8588 6.7911 17.9402C6.47633 18.0212 6.11382 18.0801 5.70299 18.1164C5.2922 18.1525 4.89453 18.1412 4.50995 18.0826C4.12543 18.0238 3.71887 17.8952 3.29077 17.6965C2.86254 17.4976 2.4604 17.2313 2.08451 16.897C1.70857 16.5628 1.33947 16.1107 0.976717 15.542C0.614004 14.9727 0.288508 14.3133 0 13.5636C0.996341 13.1389 1.93138 12.8815 2.80549 12.7908C3.6796 12.7006 4.41142 12.7347 5.00147 12.8926C5.59139 13.0507 6.13539 13.3057 6.63379 13.6582C7.13201 14.0104 7.51867 14.3582 7.794 14.7012C8.06933 15.0447 8.31632 15.4148 8.53485 15.8126C8.99802 14.6294 9.34328 13.3148 9.5708 11.8697C9.5095 11.8788 9.43094 11.89 9.33462 11.9037C9.23842 11.9173 9.03507 11.9284 8.72489 11.9375C8.41457 11.9467 8.11101 11.9443 7.81378 11.9307C7.51655 11.9171 7.16047 11.872 6.74527 11.7952C6.33012 11.7185 5.94345 11.6146 5.5851 11.4835C5.22676 11.3524 4.85979 11.1605 4.4839 10.9076C4.10815 10.6546 3.78019 10.3611 3.50064 10.027C3.22099 9.69278 2.98283 9.26591 2.78616 8.74652C2.58958 8.22717 2.46497 7.65123 2.41258 7.01894C3.0243 6.76599 3.60763 6.60116 4.16265 6.52433C4.71762 6.44768 5.20924 6.45196 5.63761 6.53795C6.06598 6.62381 6.46786 6.75937 6.84383 6.94441C7.21972 7.12955 7.54095 7.35538 7.80737 7.62182C8.07401 7.88844 8.31874 8.16381 8.5414 8.44837C8.76419 8.73293 8.94783 9.01756 9.09193 9.30212C9.2362 9.58664 9.35626 9.83961 9.45242 10.0608C9.54857 10.282 9.61852 10.4604 9.66237 10.5959L9.71452 10.8127C9.81968 9.71075 9.87219 8.82991 9.87219 8.17052C9.80193 8.11627 9.70823 8.04416 9.59026 7.95371C9.47257 7.86339 9.25824 7.66248 8.94789 7.35083C8.63785 7.03912 8.36027 6.71625 8.11552 6.382C7.87073 6.04779 7.63489 5.62779 7.40764 5.12187C7.18043 4.61591 7.0363 4.10791 6.97513 3.59744C6.91392 3.08706 6.9664 2.51343 7.13248 1.87667C7.29853 1.23987 7.60437 0.614306 8.0501 0Z" fill="currentColor"/>
					</svg>
					</div>
				<?php endif; ?>
				<?php if($settings['sub_title_style'] == 'pxl-sub-title-style-6') : ?>
					<div class="pxl-item--subtitle-icon wow zoomIn">
						<svg xmlns="http://www.w3.org/2000/svg" width="35" height="26" viewBox="0 0 35 26" fill="none">
							<path d="M16.137 17.5994C16.137 17.5994 15.2282 12.2402 18.5625 6.44997C21.8968 0.659767 30.9328 -0.388703 34.9644 0.109557C34.9644 0.109557 35.5862 10.6899 31.6301 15.4942C27.674 20.2985 21.5109 19.5322 19.7142 19.4862C18.8431 20.3652 18.0727 21.3416 17.4177 22.3966C16.7726 23.4329 16.1882 24.5068 15.6675 25.6129C15.4629 26.0049 15.1329 26.0627 14.8028 25.947C14.4727 25.8313 14.5308 25.2776 14.7354 24.7002C14.9399 24.1228 16.6228 19.9148 20.4429 14.31C24.263 8.70512 28.204 6.3626 29.7799 5.16181C29.7799 5.15591 22.959 6.2339 16.137 17.5994Z" fill="currentColor"/>
							<path d="M15.1666 18.7234C15.1666 18.7234 14.8481 13.9416 11.1198 11.2165C7.39152 8.49142 1.52363 9.62254 0 10.2719C0 10.2719 0.70545 16.1625 4.23037 19.4661C7.75528 22.7697 13.4698 20.7366 14.5738 20.0435C14.5738 20.0435 9.8356 14.6122 4.07579 12.7054C4.07115 12.7018 9.16386 12.4562 15.1666 18.7234Z" fill="currentColor"/>
						</svg>
					</div>
				<?php endif; ?>
				<span class="pxl-item--subtext">
					<?php echo esc_attr($settings['sub_title']); ?>
				</span>
			</div>
		<?php endif; ?>

		<<?php echo esc_attr($settings['title_tag']); ?> class="pxl-item--title <?php echo esc_attr($settings['h_title_style'].' '.$settings['highlight_style']); ?> <?php if($settings['pxl_animate'] !== 'wow letter') { echo esc_attr($settings['pxl_animate']); } ?>" data-wow-delay="<?php echo esc_attr($settings['pxl_animate_delay']); ?>ms">
		<?php if(is_singular('post') && $sg_post_title == 'custom_text' && !empty($sg_post_title_text) && $settings['source_type'] == 'title') { ?>
			<?php echo pxl_print_html($sg_post_title_text); ?>
			
		<?php } elseif(is_singular('portfolio') && $sg_portfolio_title == 'custom_text' && !empty($sg_portfolio_title_text) && $settings['source_type'] == 'title') { ?>
			<?php echo pxl_print_html($sg_portfolio_title_text); ?>
			
		<?php } elseif(is_singular('service') && $sg_service_title == 'custom_text' && !empty($sg_service_title_text) && $settings['source_type'] == 'title') { ?>
			<?php echo pxl_print_html($sg_service_title_text); ?>

		<?php } elseif(is_singular('product') && $sg_product_ptitle == 'custom_text' && !empty($sg_product_ptitle_text) && $settings['source_type'] == 'title') { ?>
			<?php echo pxl_print_html($sg_product_ptitle_text); ?>
			
		<?php } else { ?>
			<?php if($settings['source_type'] == 'text' && !empty($editor_title)) {
				if($settings['h_title_style'] == 'style-outline') { ?>
					<span class="pxl-text-line-backdrop">
						<span><?php echo wp_kses_post($editor_title); ?></span>
						<svg stroke-width="2" class="svg-text-line"><text dominant-baseline="middle" text-anchor="middle" x="50%" y="50%"><?php echo wp_kses_post($editor_title); ?></text></svg>		
					</span>
				<?php } else {
					echo wp_kses_post($editor_title);
				}
			} elseif($settings['source_type'] == 'title') {
				$titles = northway()->page->get_title();
				if(!empty($_GET['blog_title'])) {
					$blog_title = $_GET['blog_title'];
					$custom_title = explode('_', $blog_title);
					foreach ($custom_title as $index => $value) {
						$arr_str_b[$index] = $value;
					}
					$str = implode(' ', $arr_str_b);
					echo wp_kses_post($str);
				} else {
					pxl_print_html($titles['title']);
				}
			}?>	
		<?php } ?>	
		</<?php echo esc_attr($settings['title_tag']); ?>>
		
	</div>
</div>